(function(e){"use strict";e(window.jQuery,window,document)})(function(e,t,n,r){"use strict";var i="tocify",s="."+i,o="tocify-focus",u="tocify-hover",a="tocify-hide",f="."+a,l="tocify-header",c="."+l,h="tocify-subheader",p="."+h,d="tocify-item",v="."+d,m="tocify-extend-page",g="."+m;e.widget("toc.tocify",{version:"1.8.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:true,showEffect:"slideDown",showEffectSpeed:"medium",hideEffect:"slideUp",hideEffectSpeed:"medium",smoothScroll:true,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:true,highlightOnScroll:true,highlightOffset:40,theme:"bootstrap",extendPage:true,extendPageOffset:100,history:true,scrollHistory:false,hashGenerator:"compact",highlightDefault:true},_create:function(){var n=this;n.tocifyWrapper=e(".tocify-wrapper");n.extendPageScroll=true;n.items=[];n._generateToc();n.cachedHeights=[],n.cachedAnchors=[];n._addCSSClasses();n.webkit=function(){for(var e in t){if(e){if(e.toLowerCase().indexOf("webkit")!==-1){return true}}}return false}();n._setEventHandlers();e(t).load(function(){n._setActiveElement(true);e("html, body").promise().done(function(){setTimeout(function(){n.extendPageScroll=false},0)})})},_generateToc:function(){var t=this,n,r,s=t.options.ignoreSelector;if(this.options.selectors.indexOf(",")!==-1){n=e(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(",")))}else{n=e(this.options.context).find(this.options.selectors.replace(/ /g,""))}if(!n.length){t.element.addClass(a);return}t.element.addClass(i);n.each(function(n){if(e(this).is(s)){return}r=e("<ul/>",{id:l+n,"class":l}).append(t._nestElements(e(this),n));t.element.append(r);e(this).nextUntil(this.nodeName.toLowerCase()).each(function(){if(e(this).find(t.options.selectors).length===0){e(this).filter(t.options.selectors).each(function(){if(e(this).is(s)){return}t._appendSubheaders.call(this,t,r)})}else{e(this).find(t.options.selectors).each(function(){if(e(this).is(s)){return}t._appendSubheaders.call(this,t,r)})}})})},_setActiveElement:function(e){var n=this,r=t.location.hash.substring(1),i=n.element.find("li[data-unique='"+r+"']");if(r.length){n.element.find("."+n.focusClass).removeClass(n.focusClass);i.addClass(n.focusClass);if(n.options.showAndHide){i.click()}}else{n.element.find("."+n.focusClass).removeClass(n.focusClass);if(!r.length&&e&&n.options.highlightDefault){n.element.find(v).first().addClass(n.focusClass)}}return n},_nestElements:function(t,n){var r,i,s;r=e.grep(this.items,function(e){return e===t.text()});if(r.length){this.items.push(t.text()+n)}else{this.items.push(t.text())}s=this._generateHashValue(r,t,n);i=e("<li/>",{"class":d,"data-unique":s}).append(e("<a/>",{text:t.text()}));t.before(e("<div/>",{name:s,"data-unique":s}));return i},_generateHashValue:function(e,t,n){var r="",i=this.options.hashGenerator;if(i==="pretty"){r=t.text().toLowerCase().replace(/\s/g,"-");r=r.replace(/[^\x00-\x7F]/g,"");while(r.indexOf("--")>-1){r=r.replace(/--/g,"-")}while(r.indexOf(":-")>-1){r=r.replace(/:-/g,"-")}}else if(typeof i==="function"){r=i(t.text(),t)}else{r=t.text().replace(/\s/g,"")}if(e.length){r+=""+n}return r},_appendSubheaders:function(t,n){var r=e(this).index(t.options.selectors),i=e(t.options.selectors).eq(r-1),s=+e(this).prop("tagName").charAt(1),o=+i.prop("tagName").charAt(1),u;if(s<o){t.element.find(p+"[data-tag="+s+"]").last().append(t._nestElements(e(this),r))}else if(s===o){n.find(v).last().after(t._nestElements(e(this),r))}else{n.find(v).last().after(e("<ul/>",{"class":h,"data-tag":s})).next(p).append(t._nestElements(e(this),r))}},_setEventHandlers:function(){var i=this,s,o;this.element.on("click.tocify","li",function(n){if(i.options.history){t.location.hash=e(this).attr("data-unique")}i.element.find("."+i.focusClass).removeClass(i.focusClass);e(this).addClass(i.focusClass);if(i.options.showAndHide){var r=e('li[data-unique="'+e(this).attr("data-unique")+'"]');i._triggerShow(r)}i._scrollTo(e(this))});this.element.find("li").on({"mouseenter.tocify":function(){e(this).addClass(i.hoverClass);e(this).css("cursor","pointer")},"mouseleave.tocify":function(){if(i.options.theme!=="bootstrap"){e(this).removeClass(i.hoverClass)}}});e(t).on("resize",function(){i.calculateHeights()});e(t).on("scroll.tocify",function(){e("html, body").promise().done(function(){var s=e(t).scrollTop(),o=e(t).height(),u=e(n).height(),a=e("body")[0].scrollHeight,f,l,c,h;if(i.options.extendPage){if(i.webkit&&s>=a-o-i.options.extendPageOffset||!i.webkit&&o+s>u-i.options.extendPageOffset){if(!e(g).length){l=e('div[data-unique="'+e(v).last().attr("data-unique")+'"]');if(!l.length)return;c=l.offset().top;e(i.options.context).append(e("<div />",{"class":m,height:Math.abs(c-s)+"px","data-unique":m}));if(i.extendPageScroll){h=i.element.find("li.active");i._scrollTo(e("div[data-unique="+h.attr("data-unique")+"]"))}}}}setTimeout(function(){var s=null,o;if(i.cachedHeights.length==0){i.calculateHeights()}var u=e(t).scrollTop();i.cachedAnchors.each(function(e){if(i.cachedHeights[e]-u<0){s=e}else{return false}});o=e(i.cachedAnchors[s]).attr("data-unique");f=e('li[data-unique="'+o+'"]');if(i.options.highlightOnScroll&&f.length&&!f.hasClass(i.focusClass)){i.element.find("."+i.focusClass).removeClass(i.focusClass);f.addClass(i.focusClass);var a=i.tocifyWrapper;var l=e(f).closest(".tocify-header");var c=l.offset().top,h=a.offset().top;var p=c-h;if(p>=e(t).height()){var d=p+a.scrollTop();a.scrollTop(d)}else if(p<0){a.scrollTop(0)}}if(i.options.scrollHistory){if(t.location.hash!=="#"+o&&o!==r){if(history.replaceState){history.replaceState({},"","#"+o)}else{scrollV=n.body.scrollTop;scrollH=n.body.scrollLeft;location.hash="#"+o;n.body.scrollTop=scrollV;n.body.scrollLeft=scrollH}}}if(i.options.showAndHideOnScroll&&i.options.showAndHide){i._triggerShow(f,true)}},0)})})},calculateHeights:function(){var t=this;t.cachedHeights=[];t.cachedAnchors=[];var n=e(t.options.context).find("div[data-unique]");n.each(function(n){var r=(e(this).next().length?e(this).next():e(this)).offset().top-t.options.highlightOffset;t.cachedHeights[n]=r});t.cachedAnchors=n},show:function(t,n){var r=this,i=t;if(!t.is(":visible")){if(!t.find(p).length&&!t.parent().is(c)&&!t.parent().is(":visible")){t=t.parents(p).add(t)}else if(!t.children(p).length&&!t.parent().is(c)){t=t.closest(p)}switch(r.options.showEffect){case"none":t.show();break;case"show":t.show(r.options.showEffectSpeed);break;case"slideDown":t.slideDown(r.options.showEffectSpeed);break;case"fadeIn":t.fadeIn(r.options.showEffectSpeed);break;default:t.show();break}}if(t.parent().is(c)){r.hide(e(p).not(t))}else{r.hide(e(p).not(t.closest(c).find(p).not(t.siblings())))}return r},hide:function(e){var t=this;switch(t.options.hideEffect){case"none":e.hide();break;case"hide":e.hide(t.options.hideEffectSpeed);break;case"slideUp":e.slideUp(t.options.hideEffectSpeed);break;case"fadeOut":e.fadeOut(t.options.hideEffectSpeed);break;default:e.hide();break}return t},_triggerShow:function(e,t){var n=this;if(e.parent().is(c)||e.next().is(p)){n.show(e.next(p),t)}else if(e.parent().is(p)){n.show(e.parent(),t)}return n},_addCSSClasses:function(){if(this.options.theme==="jqueryui"){this.focusClass="ui-state-default";this.hoverClass="ui-state-hover";this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")}else if(this.options.theme==="bootstrap"){this.element.find(c+","+p).addClass("nav nav-list");this.focusClass="active"}else{this.focusClass=o;this.hoverClass=u}return this},setOption:function(){e.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){e.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(t){var n=this,r=n.options.smoothScroll||0,i=n.options.scrollTo;e("html, body").promise().done(function(){e("html, body").animate({scrollTop:e('div[data-unique="'+t.attr("data-unique")+'"]').next().offset().top-(e.isFunction(i)?i.call():i)+"px"},{duration:r})});return n}})})